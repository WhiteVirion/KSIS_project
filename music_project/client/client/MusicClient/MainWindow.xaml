<Window x:Class="MusicClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MusicClient"
        xmlns:converters="clr-namespace:MusicClient.Converters"
        Title="Music Streaming" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"
        WindowStyle="None"
        Background="Transparent">
    
    <Window.Resources>
        <converters:BoolToColorConverter x:Key="BoolToColorConverter"/>
        <converters:BoolToPlayIconConverter x:Key="BoolToPlayIconConverter"/>
        <converters:BoolToPlayTooltipConverter x:Key="BoolToPlayTooltipConverter"/>
        <converters:RepeatModeToColorConverter x:Key="RepeatModeToColorConverter"/>
        
        <!-- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸ -->
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                           From="0" To="1" Duration="0:0:0.3"/>
        </Storyboard>
    </Window.Resources>
    
    <Border Background="{StaticResource PrimaryBackground}" CornerRadius="8">
    <Grid>
        <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
                <RowDefinition Height="70"/>
        </Grid.RowDefinitions>
        
            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¾ÐºÐ½Ð° -->
            <Grid Grid.Row="0" Background="{StaticResource SecondaryBackground}" x:Name="TitleBar">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="15,0">
                    <Ellipse Width="12" Height="12" Fill="#FF5F56" Margin="0,0,8,0"/>
                    <Ellipse Width="12" Height="12" Fill="#FFBD2E" Margin="0,0,8,0"/>
                    <Ellipse Width="12" Height="12" Fill="#27CA3F"/>
                    <TextBlock Text="Music Streaming" Foreground="{StaticResource TextPrimary}" 
                             FontWeight="Medium" Margin="20,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Height="30">
                    <Button x:Name="MinimizeButton" Content="âˆ’" Style="{StaticResource ModernButtonStyle}" Width="45" Height="30"/>
                    <Button x:Name="MaximizeButton" Content="â–¡" Style="{StaticResource ModernButtonStyle}"
                            Width="45" 
                            Height="50" HorizontalAlignment="Center" VerticalAlignment="Center"
                            />
                    <Button x:Name="CloseButton" Content="Ã—" Style="{StaticResource ModernButtonStyle}" Width="45" Height="50"  VerticalAlignment="Center" HorizontalAlignment="Center"/>
                </StackPanel>
                                </Grid>

            <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="240"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Ð‘Ð¾ÐºÐ¾Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ -->
                <Border 
                        Grid.Column="0" Background="{StaticResource SecondaryBackground}">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="24,24,24,0">
                            <!-- Ð›Ð¾Ð³Ð¾Ñ‚Ð¸Ð¿ -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,32">
                                <Ellipse Width="32" Height="32" Fill="{StaticResource AccentColor}"/>
                                <TextBlock Text="CloudMusic" Foreground="{StaticResource TextPrimary}" 
                                         FontSize="26" FontWeight="Bold" 
                                         VerticalAlignment="Center" Margin="12,0,0,0"/>
                            </StackPanel>

                            <!-- ÐÐ°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ -->
                            <StackPanel VerticalAlignment="Stretch">
                                
                                <Button Content="ðŸ  Ð“Ð»Ð°Ð²Ð½Ð°Ñ" 
                                        Style="{StaticResource ModernButtonStyle}" 
                                        HorizontalAlignment="Left" 
                                        HorizontalContentAlignment="Center"
                                        Command="{Binding ShowAllTracksCommand}" 
                                        FontSize="16"/>
                                
                                <Button Content="ðŸ“š ÐœÐ¾Ñ Ð¼ÐµÐ´Ð¸Ð°Ñ‚ÐµÐºÐ°"  
                                        Style="{StaticResource ModernButtonStyle}" 
                                        HorizontalAlignment="Left"   
                                        HorizontalContentAlignment="Left"
                                        Command="{Binding ShowFavoritesCommand}" FontSize="16"/>
                                
                                <Button Content="ðŸ‘¤ ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ" 
                                        Style="{StaticResource ModernButtonStyle}" 
                                        HorizontalAlignment="Left"
                                        HorizontalContentAlignment="Left"
                                        Command="{Binding ShowProfileCommand}" 
                                        FontSize="16"/>
                                
                                <Button Content="ðŸ“¤ Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ñ‚Ñ€ÐµÐº" 
                                        Command="{Binding ShowUploadTrackViewCommand}" 
                                        Style="{StaticResource ModernButtonStyle}" 
                                         HorizontalAlignment="Left"
                                        FontSize="16"/>
                                
                              <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð’Ñ‹Ñ…Ð¾Ð´ Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð´ÐµÑÑŒ, Ñ Ð¾Ñ‚ÑÑ‚ÑƒÐ¿Ð¾Ð¼ -->
                           
                            
                            
                            </StackPanel>
 <Button x:Name="LogoutButton" Content="ðŸšª Ð’Ñ‹Ñ…Ð¾Ð´" 
                                    Style="{StaticResource ModernButtonStyle}" 
                                    HorizontalAlignment="Stretch" 
                                    HorizontalContentAlignment="Left"
                                    VerticalAlignment="Bottom"
                                    FontSize="18" Margin="0,0,0,0" 
                                    Click="LogoutButton_Click"/>
                          

                        </StackPanel>

                    </ScrollViewer>
                </Border>

                <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° -->
                <Grid Grid.Column="1" Background="{StaticResource PrimaryBackground}">
                    <ContentControl Content="{Binding CurrentView}"/>
                </Grid>
            </Grid>

            <!-- ÐÐžÐ’ÐÐ¯ ÐŸÐÐÐ•Ð›Ð¬ ÐŸÐ›Ð•Ð•Ð Ð -->
            <Border Grid.Row="2" Background="#FF282828" Padding="5,0,0, 12">
                <Grid Margin="10,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" MinWidth="200" MaxWidth="300"/> <!-- Ð˜Ð½Ñ„Ð¾ Ð¾ Ñ‚Ñ€ÐµÐºÐµ -->
                        <ColumnDefinition Width="*"/> <!-- ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ-Ð±Ð°Ñ€ Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
                        <ColumnDefinition Width="Auto" MinWidth="180"/> <!-- Ð“Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ Ð¸ Ð´Ð¾Ð¿. ÐºÐ½Ð¾Ð¿ÐºÐ¸ -->
                    </Grid.ColumnDefinitions>

                    <!-- ÐšÐ¾Ð»Ð¾Ð½ÐºÐ° 0: Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ‚Ñ€ÐµÐºÐµ -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="ðŸŽµ" FontSize="30" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="{StaticResource TextSecondary}"/>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="{Binding SelectedTrack.Title, FallbackValue='Ð¢Ñ€ÐµÐº Ð½Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ð½'}" 
                                       FontWeight="SemiBold" FontSize="13" Foreground="{StaticResource TextPrimary}" 
                                       TextTrimming="CharacterEllipsis" ToolTip="{Binding SelectedTrack.Title}"/>
                            <TextBlock Text="{Binding SelectedTrack.Artist, FallbackValue='Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½'}" 
                                       FontSize="11" Foreground="{StaticResource TextSecondary}" 
                                       TextTrimming="CharacterEllipsis" ToolTip="{Binding SelectedTrack.Artist}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- ÐšÐ¾Ð»Ð¾Ð½ÐºÐ° 1: ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ-Ð±Ð°Ñ€ Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
                    <Grid Grid.Column="1" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/> <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ -->
                            <RowDefinition Height="Auto"/> <!-- ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ-Ð±Ð°Ñ€ Ð¸ Ð²Ñ€ÐµÐ¼Ñ -->
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,2">
                            <!-- <Button Command="{Binding ShuffleCommand}" Style="{StaticResource PlayerButtonStyle}" Content="ðŸ”€" ToolTip="ÐŸÐµÑ€ÐµÐ¼ÐµÑˆÐ°Ñ‚ÑŒ"/> -->
                            <Button Command="{Binding PreviousTrackCommand}" Style="{StaticResource PlayerButtonStyle}" Content="â®" ToolTip="ÐŸÑ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ð¹ Ñ‚Ñ€ÐµÐº"/>
                            <Button Command="{Binding PlayCommand}" Style="{StaticResource PlayerButtonStyle}" Width="40" Height="40" ToolTip="{Binding IsPlaying, Converter={StaticResource BoolToPlayTooltipConverter}}">
                                <Grid>
                                    <Path Data="M8,5.14V19.14L19,12.14L8,5.14Z" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Width="16" Height="16" Stretch="Uniform">
                                        <Path.Style>
                                            <Style TargetType="Path">
                                                <Setter Property="Visibility" Value="Visible"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsPlaying}" Value="True">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Path.Style>
                                    </Path>
                                    <Path Data="M6,19H10V5H6V19ZM14,5V19H18V5H14Z" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Width="16" Height="16" Stretch="Uniform">
                                        <Path.Style>
                                            <Style TargetType="Path">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsPlaying}" Value="True">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Path.Style>
                                    </Path>
                                </Grid>
                            </Button>
                            <Button Command="{Binding NextTrackCommand}" Style="{StaticResource PlayerButtonStyle}" Content="â­" ToolTip="Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ñ‚Ñ€ÐµÐº"/>
                            <!-- <Button Command="{Binding RepeatCommand}" Style="{StaticResource PlayerButtonStyle}" Content="ðŸ”" ToolTip="ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ÑÑ‚ÑŒ"/> -->
                        </StackPanel>

                        <Grid Grid.Row="1" Margin="10,0,10,-2" VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{Binding CurrentTime, FallbackValue='0:00'}" 
                                       Foreground="{StaticResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <Slider Grid.Column="1" x:Name="ProgressSlider" 
                                    Value="{Binding CurrentPosition, Mode=TwoWay}" 
                                    Maximum="{Binding TotalDuration, FallbackValue=1}" 
                                    Thumb.DragStarted="ProgressSlider_DragStarted" 
                                    Thumb.DragCompleted="ProgressSlider_DragCompleted" 
                                    ValueChanged="ProgressSlider_ValueChanged"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2" Text="{Binding TotalDuration, Converter={StaticResource DurationConverter}, FallbackValue='0:00'}" 
                                       Foreground="{StaticResource TextSecondary}" FontSize="10" VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                    </Grid>
                    
                    <!-- ÐšÐ¾Ð»Ð¾Ð½ÐºÐ° 2: Ð“Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,0">
                        <TextBlock Text="ðŸ”Š" FontSize="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextSecondary}"/>
                        <Slider x:Name="VolumeSlider" Width="80" Minimum="0" Maximum="1" 
                                Value="{Binding Volume, Mode=TwoWay}" 
                                ValueChanged="VolumeSlider_ValueChanged"
                                VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- MediaElement Ð´Ð»Ñ Ð°ÑƒÐ´Ð¸Ð¾ (ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ð¹, ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð¸Ð· ÐºÐ¾Ð´Ð°) -->
            <MediaElement x:Name="Player" LoadedBehavior="Manual" UnloadedBehavior="Manual" Visibility="Collapsed"/>
        </Grid>
    </Border>
</Window>